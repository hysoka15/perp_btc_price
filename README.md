# å¤šäº¤æ˜“æ‰€BTCä»·æ ¼å¯¹æ¯”ç³»ç»Ÿ

å®æ—¶å¯¹æ¯”å¤šä¸ªäº¤æ˜“æ‰€çš„BTCåˆçº¦ä»·æ ¼å·®è·ï¼Œæä¾›å¯è§†åŒ–æ˜¾ç¤ºã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸ”„ æ¯2ç§’è‡ªåŠ¨è·å–ä»·æ ¼æ•°æ®
- ğŸ“Š ä»¥å¸å®‰ä¸ºåŸºå‡†ï¼Œè®¡ç®—å…¶ä»–äº¤æ˜“æ‰€çš„ä»·å·®
- ğŸ“ˆ Webç•Œé¢å±•ç¤ºä»·å·®Kçº¿å›¾
- ğŸ’¾ SQLiteæ•°æ®åº“æŒä¹…åŒ–å­˜å‚¨
- âš¡ å®æ—¶æ›´æ–°ä»·æ ¼å’ŒçŠ¶æ€
- ğŸŒ æ”¯æŒå¤šäº¤æ˜“æ‰€ï¼šå¸å®‰ã€Lighterã€EdgeXã€Aster

## ç³»ç»Ÿæ¶æ„

```
â”œâ”€â”€ binance_client.py     # å¸å®‰äº¤æ˜“æ‰€APIå®¢æˆ·ç«¯
â”œâ”€â”€ lighter_client.py     # Lighteräº¤æ˜“æ‰€APIå®¢æˆ·ç«¯
â”œâ”€â”€ edgex_client.py       # EdgeXäº¤æ˜“æ‰€APIå®¢æˆ·ç«¯
â”œâ”€â”€ aster_client.py       # Asteräº¤æ˜“æ‰€APIå®¢æˆ·ç«¯
â”œâ”€â”€ database.py           # æ•°æ®åº“ç®¡ç†
â”œâ”€â”€ price_collector.py    # ä»·æ ¼é‡‡é›†ä¸»ç¨‹åº
â”œâ”€â”€ web_server.py         # WebæœåŠ¡å™¨
â””â”€â”€ templates/
    â””â”€â”€ index.html        # Webç•Œé¢
```

## å®‰è£…å’Œè¿è¡Œ

### 1. å®‰è£…ä¾èµ–

```bash
# å®‰è£…Pythonä¾èµ–
pip install -r requirements.txt

# å®‰è£…Lighter SDK
pip install -e ./lighter-python

# å®‰è£…EdgeX SDK  
pip install -e ./edgex-python-sdk
```

### 2. é…ç½®ç¯å¢ƒå˜é‡

å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿å¹¶å¡«å…¥ä½ çš„APIå¯†é’¥ï¼š

```bash
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œå¡«å…¥ä½ çš„çœŸå®APIå¯†é’¥
```

**éœ€è¦é…ç½®çš„ç¯å¢ƒå˜é‡:**
- `ASTER_API_KEY`: Asteräº¤æ˜“æ‰€APIå¯†é’¥
- `ASTER_API_SECRET`: Asteräº¤æ˜“æ‰€APIç§˜é’¥
- `EDGEX_ACCOUNT_ID`: EdgeXè´¦æˆ·ID
- `EDGEX_STARK_PRIVATE_KEY`: EdgeX Starkç§é’¥
- `EDGEX_BASE_URL`: EdgeX APIåœ°å€ï¼ˆé»˜è®¤: https://pro.edgex.exchangeï¼‰

**âš ï¸ é‡è¦å®‰å…¨æé†’:**
- ç»ä¸è¦å°†çœŸå®çš„APIå¯†é’¥æäº¤åˆ°ä»£ç ä»“åº“
- ä½¿ç”¨ç¯å¢ƒå˜é‡ç®¡ç†æ‰€æœ‰æ•æ„Ÿä¿¡æ¯
- ç¡®ä¿ `.env` æ–‡ä»¶å·²è¢« `.gitignore` å¿½ç•¥

### 3. å¯åŠ¨ç³»ç»Ÿ

```bash
# å¯åŠ¨ä»·æ ¼é‡‡é›†å™¨ï¼ˆåå°è¿è¡Œï¼‰
nohup python3 price_collector.py > collector.log 2>&1 &

# å¯åŠ¨WebæœåŠ¡å™¨
python3 web_server.py
```

### 4. è®¿é—®Webç•Œé¢

æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼šhttp://localhost:5000

## ä½¿ç”¨è¯´æ˜

### Webç•Œé¢åŠŸèƒ½

1. **ä»·å·®Kçº¿å›¾**
   - æ¨ªè½´ï¼šæ—¶é—´
   - çºµè½´ï¼šä¸å¸å®‰çš„ä»·å·®ï¼ˆUSDTï¼‰
   - æ­£æ•°ï¼šé«˜äºå¸å®‰ä»·æ ¼
   - è´Ÿæ•°ï¼šä½äºå¸å®‰ä»·æ ¼

2. **æ—¶é—´èŒƒå›´é€‰æ‹©**
   - 1å°æ—¶ã€6å°æ—¶ã€24å°æ—¶ã€3å¤©ã€7å¤©

3. **å®æ—¶æ•°æ®**
   - æ¯5ç§’è‡ªåŠ¨åˆ·æ–°
   - æ˜¾ç¤ºäº¤æ˜“æ‰€çŠ¶æ€
   - æ˜¾ç¤ºæœ€æ–°ä»·æ ¼å’Œä»·å·®

4. **ç»Ÿè®¡ä¿¡æ¯**
   - æ€»è®°å½•æ•°
   - æ´»è·ƒäº¤æ˜“æ‰€æ•°é‡
   - æ•°æ®æ—¶é—´èŒƒå›´

### æ•°æ®å­˜å‚¨

æ‰€æœ‰ä»·æ ¼æ•°æ®å­˜å‚¨åœ¨SQLiteæ•°æ®åº“ä¸­ï¼š
- æ–‡ä»¶åï¼š`price_data.db`
- è¡¨ç»“æ„ï¼šä»·æ ¼æ•°æ®ã€äº¤æ˜“æ‰€çŠ¶æ€
- è‡ªåŠ¨æ¸…ç†7å¤©å‰çš„æ—§æ•°æ®

## ç›‘æ§å’Œæ—¥å¿—

### æ—¥å¿—æ–‡ä»¶
- `price_collector.log` - ä»·æ ¼é‡‡é›†æ—¥å¿—
- `collector.log` - åå°è¿è¡Œæ—¥å¿—

### ç›‘æ§æŒ‡æ ‡
- å„äº¤æ˜“æ‰€æˆåŠŸç‡
- ä»·æ ¼è·å–é¢‘ç‡
- æ•°æ®åº“å†™å…¥çŠ¶æ€

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **æ— æ³•è·å–æŸäº¤æ˜“æ‰€ä»·æ ¼**
   - æ£€æŸ¥APIå¯†é’¥é…ç½®
   - æ£€æŸ¥ç½‘ç»œè¿æ¥
   - æŸ¥çœ‹æ—¥å¿—é”™è¯¯ä¿¡æ¯

2. **Webç•Œé¢æ— æ•°æ®**
   - ç¡®è®¤ä»·æ ¼é‡‡é›†å™¨æ­£åœ¨è¿è¡Œ
   - æ£€æŸ¥æ•°æ®åº“æ–‡ä»¶æ˜¯å¦å­˜åœ¨
   - æŸ¥çœ‹WebæœåŠ¡å™¨æ—¥å¿—

3. **å›¾è¡¨ä¸æ˜¾ç¤º**
   - æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯
   - ç¡®è®¤Chart.jsåŠ è½½æˆåŠŸ
   - éªŒè¯APIæ¥å£è¿”å›æ•°æ®

### é‡å¯æœåŠ¡

```bash
# åœæ­¢ä»·æ ¼é‡‡é›†å™¨
pkill -f price_collector.py

# é‡æ–°å¯åŠ¨
nohup python3 price_collector.py > collector.log 2>&1 &

# é‡å¯WebæœåŠ¡å™¨
pkill -f web_server.py
python3 web_server.py
```

## æŠ€æœ¯ç»†èŠ‚

### APIæ¥å£

- `GET /` - ä¸»é¡µé¢
- `GET /api/chart_data?hours=24` - è·å–å›¾è¡¨æ•°æ®
- `GET /api/exchange_status` - è·å–äº¤æ˜“æ‰€çŠ¶æ€
- `GET /api/latest_prices` - è·å–æœ€æ–°ä»·æ ¼
- `GET /api/statistics` - è·å–ç»Ÿè®¡ä¿¡æ¯

### æ•°æ®æ ¼å¼

```json
{
  "success": true,
  "data": {
    "labels": ["æ—¶é—´1", "æ—¶é—´2", ...],
    "datasets": [
      {
        "label": "LIGHTER ä»·å·®",
        "data": [ä»·å·®1, ä»·å·®2, ...],
        "borderColor": "#007bff"
      }
    ]
  }
}
```

## å¼€å‘è¯´æ˜

### æ·»åŠ æ–°äº¤æ˜“æ‰€

1. åˆ›å»ºæ–°çš„å®¢æˆ·ç«¯æ–‡ä»¶ï¼ˆå¦‚ `newexchange_client.py`ï¼‰
2. å®ç°ä»·æ ¼è·å–æ–¹æ³•
3. åœ¨ `price_collector.py` ä¸­æ·»åŠ é…ç½®
4. æ›´æ–°Webç•Œé¢é¢œè‰²é…ç½®

### ä¿®æ”¹é‡‡é›†é¢‘ç‡

ç¼–è¾‘ `price_collector.py` ä¸­çš„ç¡çœ æ—¶é—´ï¼š
```python
time.sleep(2)  # æ”¹ä¸ºå…¶ä»–ç§’æ•°
```

### è‡ªå®šä¹‰å›¾è¡¨æ ·å¼

ç¼–è¾‘ `templates/index.html` ä¸­çš„Chart.jsé…ç½®ã€‚